---
title: JavaScript Tests
seoTitle: "How to test Lunul Programs with JavaScript/TypeScript"
description:
  "How to write fast tests for Lunul programs in JavaScript and NodeJS using
  Lunul bankrun"
keywords:
  - lunul javascript tests
  - lunul testing
  - lunul bankrun
  - bankrun tests
  - bankrun examples
  - lunul test examples
h1: JavaScript Testing Framework for Lunul
---

> This is a beta version of the [Lunul Toolkit](/docs/toolkit/), and is
> still a WIP. Please post all feedback as a GitHub issue
> [here](https://github.com/lunul-foundation/developer-content/issues/new?title=%5Btoolkit%5D%20).

## Add Dependency

Navigate to your program directory and run:

```shell
npm install lunul-bankrun
```

## Bankrun Overview

[Bankrun](https://github.com/kevinheavey/lunul-bankrun) is a fast and
lightweight framework for testing Lunul programs in NodeJS.

It uses the
[`lunul-program-test`](https://crates.io/crates/lunul-program-test) crate
under the hood and allows you to do things that are not possible with
`lunul-test-validator`, such as jumping back and forth in time or dynamically
setting account data.

Bankrun works by spinning up a lightweight `BanksServer` that's like an RPC node
but much faster, and creating a `BanksClient` to talk to the server. This runs
the Lunul
[Banks](https://github.com/lunul-labs/lunul/blob/master/runtime/src/bank.rs).

## Minimal Example

```javascript
import { start } from "lunul-bankrun";
import { PublicKey, Transaction, SystemProgram } from "@lunul/web3.js";

test("one transfer", async () => {
  const context = await start([], []);
  const client = context.banksClient;
  const payer = context.payer;
  const receiver = PublicKey.unique();
  const blockhash = context.lastBlockhash;
  const transferLamports = 1_000_000n;
  const ixs = [
    SystemProgram.transfer({
      fromPubkey: payer.publicKey,
      toPubkey: receiver,
      lamports: transferLamports,
    }),
  ];
  const tx = new Transaction();
  tx.recentBlockhash = blockhash;
  tx.add(...ixs);
  tx.sign(payer);
  await client.processTransaction(tx);
  const balanceAfter = await client.getBalance(receiver);
  expect(balanceAfter).toEqual(transferLamports);
});
```

## Additional Resources

- [Bankrun Docs](https://kevinheavey.github.io/lunul-bankrun/)
- [Bankrun Source Code](https://github.com/kevinheavey/lunul-bankrun)
- [Official Bankrun Tutorials](https://kevinheavey.github.io/lunul-bankrun/tutorial/)
- [Complete Project Example](https://github.com/lunul-developers/developer-bootcamp-2024/tree/main/project-2-voting/anchor/tests)
